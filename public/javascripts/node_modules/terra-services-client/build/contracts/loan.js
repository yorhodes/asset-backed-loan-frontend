(function(){var f,g=function(b,a){return function(){return b.apply(a,arguments)}},k=function(b,a){function c(){this.constructor=b}for(var d in a)h.call(a,d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c;b.__super__=a.prototype;return b},h={}.hasOwnProperty;f=function(b){function a(c,d,b,l){this.wait=g(this.wait,this);this.contracts.contract.address=c;a.__super__.constructor.call(this);this.a=this.contract.NewLoan.listen(function(a,c,b,e){return d(a,c,b,e)});this.b=this.contract.ForceSellCompleted.listen(function(a){return b(a)});
this.c=this.contract.SellCompleted.listen(function(a){return l(a)})}k(a,b);a.prototype.contracts={contract:{address:"0x0","interface":[{constant:!1,inputs:[{name:"new_exchange_rate",type:"uint256"}],name:"set_exchange_rate",outputs:[],type:"function"},{constant:!1,inputs:[],name:"sell",outputs:[],type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"loans",outputs:[{name:"collateral",type:"uint256"},{name:"amount",type:"uint256"},{name:"fee",type:"uint256"},{name:"exists",type:"bool"},
{name:"time",type:"uint256"}],type:"function"},{constant:!1,inputs:[{name:"_borrower",type:"address"}],name:"in_the_money",outputs:[{name:"",type:"bool"}],type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"borrow",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_borrower",type:"address"}],name:"force_sell",outputs:[],type:"function"},{inputs:[{name:"_usd",type:"address"},{name:"_kraken_account",type:"address"},{name:"_fee_percentage",type:"uint256"},{name:"_reward_percentage",
type:"uint256"},{name:"_exchange_rate",type:"uint256"}],type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"collateral",type:"uint256"},{indexed:!1,name:"amount",type:"uint256"},{indexed:!1,name:"fee",type:"uint256"},{indexed:!1,name:"time",type:"uint256"}],name:"NewLoan",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"b",type:"address"}],name:"SellCompleted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"b",type:"address"}],name:"ForceSellCompleted",type:"event"}]}};a.prototype.set_exchange_rate=
function(a,b){return this.contract.set_exchange_rate(a,function(a){return b(a)})};a.prototype.borrow=function(a,b,e){return this.contract.borrow({value:this.web3.toWei(b,"ether"),gas:1E6},a,function(a){return e(a)})};a.prototype.sell=function(){return this.contract.sell(function(a){return console.log("sell completed",a)})};a.prototype.force_sell=function(a,b){return this.contract.force_sell(a,function(e){console.log("force sell completed. borrower: "+a);return b(e)})};a.prototype.stop=function(){return this.event_listener.stop()};
a.prototype.wait=function(a){return setTimeout(function(b){return function(){return a()}}(this),2E3)};return a}(require("../lib/equery"));module.exports=f}).call(this);
